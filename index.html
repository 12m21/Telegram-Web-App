<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒØ³Ø¨ Ø§Ù„Ù…ØµØºØ± - EarnTech</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
        /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ù„ÙˆØ§Ù† ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ø§Ù„Ø«ÙŠÙ…ÙŠØ© Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„ØªÙ†Ø§ØºÙ… */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--tg-theme-bg-color, #f4f4f4);
            color: var(--tg-theme-text-color, #333);
            text-align: center;
            padding: 20px;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 90%;
            max-width: 400px;
            padding: 20px;
            background-color: var(--tg-theme-secondary-bg-color, #ffffff);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: var(--tg-theme-text-color, #007bff);
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        #adContainer {
            background-color: #e9ecef;
            border: 2px solid var(--tg-theme-hint-color, #ccc);
            min-height: 120px;
            line-height: 120px;
            margin: 20px 0;
            font-size: 1.1em;
            color: var(--tg-theme-hint-color, #6c757d);
            border-radius: 8px;
            font-weight: bold;
        }
        
        button {
            background-color: var(--tg-theme-button-color, #28a745);
            color: var(--tg-theme-button-text-color, white);
            border: none;
            padding: 14px 25px;
            font-size: 1em;
            cursor: pointer;
            border-radius: 8px;
            transition: background-color 0.3s;
            width: 100%;
            margin-top: 15px;
            font-weight: bold;
        }

        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        #status {
            margin-top: 20px;
            font-weight: bold;
            color: var(--tg-theme-text-color);
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ’° Ù…Ø±ÙƒØ² Ø§Ù„ÙƒØ³Ø¨</h1>
        
        <div id="adContainer">
            Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ 5 Ù†Ù‚Ø§Ø·
        </div>

        <p id="status">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ: **Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„**</p>

        <button id="adButton">Ø§Ø¨Ø¯Ø£ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</button>
        
        <p style="font-size: 0.75em; color: var(--tg-theme-hint-color, #888); margin-top: 20px;">
            ØªØ°ÙƒÙŠØ±: Ø§Ù„Ø¨ÙˆØª (Ø§Ù„Ø¨Ø§ÙŠØ«ÙˆÙ†) Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø· ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.
        </p>
    </div>

    <script>
        // ØªÙ‡ÙŠØ¦Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø®Ø§Øµ Ø¨ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… (Ø¶Ø±ÙˆØ±ÙŠ)
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.MainButton.hide(); // Ù„Ø¥Ø®ÙØ§Ø¡ Ø²Ø± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙˆØ§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ ÙˆØ§Ø¬Ù‡ØªÙ†Ø§

        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
        let currentScore = 0;
        const button = document.getElementById('adButton');
        const statusText = document.getElementById('status');
        const adDuration = 10; // Ù…Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ
        const pointsPerAd = 5; // Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©

        // Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙˆØª (Ø§Ù„Ø®Ù„ÙÙŠØ©)
        function sendScoreUpdate(points) {
             // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ Ù†ØµÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙˆØªØŒ ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ ÙˆÙ†Ù‚Ø§Ø· Ø§Ù„ÙƒØ³Ø¨
             // Ø§Ù„Ø¨ÙˆØª (Python) ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ø¨Ø±Ù…Ø¬Ø§Ù‹ Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ÙˆØªØ­Ù„ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ù†ØµÙŠØ©
             tg.sendData(`action=view_ad_complete&points=${points}&user_id=${tg.initDataUnsafe.user.id}`);
             
             // Ø¥Ø¸Ù‡Ø§Ø± ØªÙ†Ø¨ÙŠÙ‡ Ù…Ø±Ø¦ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø¨Ø± ÙˆØ§Ø¬Ù‡Ø© ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
             tg.showAlert(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© ${points} Ù†Ù‚Ø·Ø© Ø¨Ù†Ø¬Ø§Ø­!`);
        }
        
        // Ø¯Ø§Ù„Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©
        button.addEventListener('click', function() {
            if (button.disabled) return;

            button.disabled = true;
            let timer = adDuration;
            button.textContent = `Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©... (${timer} Ø«Ø§Ù†ÙŠØ©)`;
            
            // Ø¨Ø¯Ø¡ Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙˆÙ‚Øª
            const interval = setInterval(() => {
                timer--;
                button.textContent = `Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©... (${timer} Ø«Ø§Ù†ÙŠØ©)`;
                
                if (timer <= 0) {
                    clearInterval(interval);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø· Ù…Ø­Ù„ÙŠØ§Ù‹ ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ù„Ù„Ø¨ÙˆØª
                    currentScore += pointsPerAd;
                    statusText.innerHTML = `Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ: <strong>${currentScore} Ù†Ù‚Ø·Ø©</strong>.`;
                    
                    button.textContent = 'Ø´Ø§Ù‡Ø¯ Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯';
                    button.disabled = false;

                    // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¯Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: Ù‡Ø°Ù‡ Ù‡ÙŠ Ù†Ù‚Ø·Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù€ Python
                    sendScoreUpdate(pointsPerAd);
                }
            }, 1000); // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
        });

        // ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        window.onload = function() {
             // Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŒ Ù†Ø±Ø³Ù„ Ø·Ù„Ø¨Ø§Ù‹ Ù„Ù„Ø¨ÙˆØª Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø£ÙˆÙ„ÙŠ
             // Ù‡Ø°Ø§ ÙŠØªØ·Ù„Ø¨ Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø¨ÙˆØª (Python) Ù„ÙŠØ±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„ÙˆÙŠØ¨ App
             tg.sendData('action=request_initial_score');

             // ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„ØªØ±Ø­ÙŠØ¨
             if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                 const name = tg.initDataUnsafe.user.first_name || "Ø¹Ø²ÙŠØ²ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…";
                 document.querySelector('h1').textContent = `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ${name} ÙÙŠ Ù…Ø±ÙƒØ² Ø§Ù„ÙƒØ³Ø¨!`;
             }
        };

    </script>
</body>
</html>
